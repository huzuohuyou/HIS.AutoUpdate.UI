#pragma checksum "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "2108d0012756e21a2415f4b1dcc1a6abb85461ad"
// <auto-generated/>
#pragma warning disable 1591
namespace HIS.AutoUpdate.Blazor.Pages
{
    #line hidden
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\_Imports.razor"
using AntDesign;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\_Imports.razor"
using AntDesign.Pro.Layout;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\_Imports.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\_Imports.razor"
using Microsoft.AspNetCore.Components.WebAssembly.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\_Imports.razor"
using HIS.AutoUpdate.Blazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
using System.Text.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
using HIS.AutoUpdate.Blazor.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
using System;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
using System.Collections.Generic;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
using System.IO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
using System.Runtime.Serialization.Formatters;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
using System.ComponentModel.DataAnnotations;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
using System.Text.Json;

#line default
#line hidden
#nullable disable
    public partial class UploadFile : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, "<br>\r\n\r\n");
            __Blazor.HIS.AutoUpdate.Blazor.Pages.UploadFile.TypeInference.CreateForm_0(__builder, 1, 2, 
#nullable restore
#line 14 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
              model

#line default
#line hidden
#nullable disable
            , 3, Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Forms.EditContext>(this, 
#nullable restore
#line 15 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
                OnFinish

#line default
#line hidden
#nullable disable
            ), 4, Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Forms.EditContext>(this, 
#nullable restore
#line 16 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
                      OnFinishFailed

#line default
#line hidden
#nullable disable
            ), 5, 
#nullable restore
#line 17 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
                    8

#line default
#line hidden
#nullable disable
            , 6, 
#nullable restore
#line 18 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
                      16

#line default
#line hidden
#nullable disable
            , 7, (context) => (__builder2) => {
                __builder2.AddMarkupContent(8, "\r\n    ");
                __builder2.OpenComponent<AntDesign.FormItem>(9);
                __builder2.AddAttribute(10, "Label", "配置文件");
                __builder2.AddAttribute(11, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(12, "\r\n        ");
                    __Blazor.HIS.AutoUpdate.Blazor.Pages.UploadFile.TypeInference.CreateInput_1(__builder3, 13, 14, "configFileName", 15, 
#nullable restore
#line 20 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
                                                          context.configFileName

#line default
#line hidden
#nullable disable
                    , 16, Microsoft.AspNetCore.Components.EventCallback.Factory.Create(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => context.configFileName = __value, context.configFileName)), 17, () => context.configFileName);
                    __builder3.AddMarkupContent(18, "\r\n    ");
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(19, "\r\n\r\n    ");
                __builder2.OpenComponent<AntDesign.FormItem>(20);
                __builder2.AddAttribute(21, "Label", "模块");
                __builder2.AddAttribute(22, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(23, "\r\n        ");
                    __Blazor.HIS.AutoUpdate.Blazor.Pages.UploadFile.TypeInference.CreateInput_2(__builder3, 24, 25, "settingsSection", 26, 
#nullable restore
#line 24 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
                                                           context.settingsSection

#line default
#line hidden
#nullable disable
                    , 27, Microsoft.AspNetCore.Components.EventCallback.Factory.Create(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => context.settingsSection = __value, context.settingsSection)), 28, () => context.settingsSection);
                    __builder3.AddMarkupContent(29, "\r\n    ");
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(30, "\r\n    ");
                __builder2.OpenComponent<AntDesign.FormItem>(31);
                __builder2.AddAttribute(32, "Label", "版本");
                __builder2.AddAttribute(33, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(34, "\r\n\r\n        ");
                    __Blazor.HIS.AutoUpdate.Blazor.Pages.UploadFile.TypeInference.CreateInput_3(__builder3, 35, 36, "CurrentVersionURL", 37, 
#nullable restore
#line 28 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
                                                             context.CurrentVersionURL

#line default
#line hidden
#nullable disable
                    , 38, Microsoft.AspNetCore.Components.EventCallback.Factory.Create(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => context.CurrentVersionURL = __value, context.CurrentVersionURL)), 39, () => context.CurrentVersionURL);
                    __builder3.AddMarkupContent(40, "\r\n    ");
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(41, "\r\n    ");
                __builder2.OpenComponent<AntDesign.FormItem>(42);
                __builder2.AddAttribute(43, "Label", "文件");
                __builder2.AddAttribute(44, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(45, "\r\n\r\n        ");
                    __builder3.OpenComponent<AntDesign.Upload>(46);
                    __builder3.AddAttribute(47, "Action", "http://192.168.5.212:20002/api/ConfigurationManager/UploadFile");
                    __builder3.AddAttribute(48, "Name", "files");
                    __builder3.AddAttribute(49, "ShowButton", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 35 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
                            fileList?.Count < 1

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(50, "ListType", "picture-card");
                    __builder3.AddAttribute(51, "Data", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.Dictionary<System.String, System.Object>>(
#nullable restore
#line 37 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
                      dict

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(52, "OnChange", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<AntDesign.UploadInfo>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<AntDesign.UploadInfo>(this, 
#nullable restore
#line 38 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
                          HandleChange

#line default
#line hidden
#nullable disable
                    )));
                    __builder3.AddAttribute(53, "FileList", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.List<AntDesign.UploadFileItem>>(
#nullable restore
#line 34 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
                                fileList

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(54, "FileListChanged", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.Collections.Generic.List<AntDesign.UploadFileItem>>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.Collections.Generic.List<AntDesign.UploadFileItem>>(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => fileList = __value, fileList))));
                    __builder3.AddAttribute(55, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder4) => {
                        __builder4.AddMarkupContent(56, "\r\n            ");
                        __builder4.OpenElement(57, "div");
                        __builder4.AddMarkupContent(58, "\r\n                ");
                        __builder4.OpenComponent<AntDesign.Icon>(59);
                        __builder4.AddAttribute(60, "Type", "plus");
                        __builder4.CloseComponent();
                        __builder4.AddMarkupContent(61, "\r\n                ");
                        __builder4.AddMarkupContent(62, "<div className=\"ant-upload-text\">Upload</div>\r\n            ");
                        __builder4.CloseElement();
                        __builder4.AddMarkupContent(63, "\r\n\r\n        ");
                    }
                    ));
                    __builder3.CloseComponent();
                    __builder3.AddMarkupContent(64, "\r\n    ");
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(65, "\r\n\r\n    ");
                __builder2.OpenComponent<AntDesign.FormItem>(66);
                __builder2.AddAttribute(67, "WrapperColOffset", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<OneOf.OneOf<System.String, System.Int32>>(
#nullable restore
#line 47 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
                                8

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(68, "WrapperColSpan", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<OneOf.OneOf<System.String, System.Int32>>(
#nullable restore
#line 47 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
                                                   16

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(69, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddMarkupContent(70, "\r\n        ");
                    __builder3.OpenComponent<AntDesign.Button>(71);
                    __builder3.AddAttribute(72, "Type", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 48 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
                       ButtonType.Primary

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(73, "HtmlType", "submit");
                    __builder3.AddAttribute(74, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder4) => {
                        __builder4.AddMarkupContent(75, "\r\n            提交\r\n        ");
                    }
                    ));
                    __builder3.CloseComponent();
                    __builder3.AddMarkupContent(76, "\r\n    ");
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(77, "\r\n");
            }
            );
            __builder.AddMarkupContent(78, "\r\n\r\n\r\n\r\n");
            __builder.AddMarkupContent(79, @"<style>
    /* you can make up upload button and sample style by using stylesheets */
    .ant-upload-select-picture-card i {
        color: #999;
        font-size: 32px;
    }

    .ant-upload-select-picture-card .ant-upload-text {
        margin-top: 8px;
        color: #666;
    }
</style>");
        }
        #pragma warning restore 1998
#nullable restore
#line 56 "D:\GitHub\HIS.AutoUpdate.UI\HIS.AutoUpdate.Blazor\Pages\UploadFile.razor"
 
    [Parameter]
    public string settingsSection { get; set; } = @"DW_HIS.DW.exe";
    [Parameter]
    public string configFileName { get; set; } = @"E:\Deployment\HIS.AutoUpdate\AutoUpgradeServerDefine.config";
    Dictionary<string, object> dict = new Dictionary<string, object>()
{
        { "configFileName",@"E:\Deployment\HIS.AutoUpdate\AutoUpgradeServerDefine.config"}
    };

    public class CreateUpdateModel
    {
        [Required]
        public string configFileName { get; set; } = @"E:\Deployment\HIS.AutoUpdate\AutoUpgradeServerDefine.config";
        [Required]
        public Dictionary<string, CurrentVersionURL> settingsSection { get; set; }

    }

    public class Model
    {
        [Required]
        public string configFileName { get; set; } = @"E:\Deployment\HIS.AutoUpdate\AutoUpgradeServerDefine.config";
        [Required]
        public string settingsSection { get; set; } = @"DW_HIS.DW.exe";
        [Required]
        public string CurrentVersionURL { get; set; } = "2.0.21.2011|HIS.DW_ER_3.0.21.2011.zip";

    }
    private Model model = new Model();

    private async Task OnFinish(EditContext editContext)
    {
        try
        {
            var createUpdateModel = new CreateUpdateModel()
            {
                configFileName = model.configFileName,
                settingsSection = new Dictionary<string, CurrentVersionURL>()
                {
                    { model.settingsSection, new CurrentVersionURL() { currentVersionURL = model.CurrentVersionURL } }
                }
            };

            var m = new HISClientConfigModel()
            {
                configFileName = model.configFileName,
                settingsSection = new HISSettingsSection()
                {
                    DW_HIS_DW_exe = new CurrentVersionURL
                    {
                        currentVersionURL = @"E:\Deployment\HIS.AutoUpdate\AutoUpgradeServerDefine.config"
                    }
                }
            };
            var s = JsonSerializer.Serialize(createUpdateModel);
            var result = await Http.PostAsJsonAsync<HISClientConfigModel>($@"/api/ConfigurationManager", m);

            string resultContent = result.Content.ReadAsStringAsync().Result;
        }
        catch (Exception ex)
        {

            await _message.Error("配置失败！！！");
        }

    }

    private void OnFinishFailed(EditContext editContext)
    {
        Console.WriteLine($"Failed:{JsonSerializer.Serialize(model)}");
    }
    List<UploadFileItem> fileList = new List<UploadFileItem>
    {

    };

    async Task HandleChange(UploadInfo fileinfo)
    {
        try
        {
            if (fileinfo.File.State == UploadState.Success)
            {
                await _message.Success("文件上传成功！！！");
                fileinfo.File.Url = fileinfo.File.ObjectURL;
            }
        }
        catch (Exception ex)
        {

            await _message.Error(ex.Message);
        }

    }

    public class ResponseModel
    {
        public string name { get; set; }

        public string status { get; set; }

        public string url { get; set; }

        public string thumbUrl { get; set; }
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private MessageService _message { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient Http { get; set; }
    }
}
namespace __Blazor.HIS.AutoUpdate.Blazor.Pages.UploadFile
{
    #line hidden
    internal static class TypeInference
    {
        public static void CreateForm_0<TModel>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, TModel __arg0, int __seq1, global::Microsoft.AspNetCore.Components.EventCallback<global::Microsoft.AspNetCore.Components.Forms.EditContext> __arg1, int __seq2, global::Microsoft.AspNetCore.Components.EventCallback<global::Microsoft.AspNetCore.Components.Forms.EditContext> __arg2, int __seq3, global::OneOf.OneOf<global::System.String, global::System.Int32> __arg3, int __seq4, global::OneOf.OneOf<global::System.String, global::System.Int32> __arg4, int __seq5, global::Microsoft.AspNetCore.Components.RenderFragment<TModel> __arg5)
        {
        __builder.OpenComponent<global::AntDesign.Form<TModel>>(seq);
        __builder.AddAttribute(__seq0, "Model", __arg0);
        __builder.AddAttribute(__seq1, "OnFinish", __arg1);
        __builder.AddAttribute(__seq2, "OnFinishFailed", __arg2);
        __builder.AddAttribute(__seq3, "LabelColSpan", __arg3);
        __builder.AddAttribute(__seq4, "WrapperColSpan", __arg4);
        __builder.AddAttribute(__seq5, "ChildContent", __arg5);
        __builder.CloseComponent();
        }
        public static void CreateInput_1<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.String __arg0, int __seq1, TValue __arg1, int __seq2, global::Microsoft.AspNetCore.Components.EventCallback<TValue> __arg2, int __seq3, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg3)
        {
        __builder.OpenComponent<global::AntDesign.Input<TValue>>(seq);
        __builder.AddAttribute(__seq0, "Placeholder", __arg0);
        __builder.AddAttribute(__seq1, "Value", __arg1);
        __builder.AddAttribute(__seq2, "ValueChanged", __arg2);
        __builder.AddAttribute(__seq3, "ValueExpression", __arg3);
        __builder.CloseComponent();
        }
        public static void CreateInput_2<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.String __arg0, int __seq1, TValue __arg1, int __seq2, global::Microsoft.AspNetCore.Components.EventCallback<TValue> __arg2, int __seq3, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg3)
        {
        __builder.OpenComponent<global::AntDesign.Input<TValue>>(seq);
        __builder.AddAttribute(__seq0, "Placeholder", __arg0);
        __builder.AddAttribute(__seq1, "Value", __arg1);
        __builder.AddAttribute(__seq2, "ValueChanged", __arg2);
        __builder.AddAttribute(__seq3, "ValueExpression", __arg3);
        __builder.CloseComponent();
        }
        public static void CreateInput_3<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.String __arg0, int __seq1, TValue __arg1, int __seq2, global::Microsoft.AspNetCore.Components.EventCallback<TValue> __arg2, int __seq3, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg3)
        {
        __builder.OpenComponent<global::AntDesign.Input<TValue>>(seq);
        __builder.AddAttribute(__seq0, "Placeholder", __arg0);
        __builder.AddAttribute(__seq1, "Value", __arg1);
        __builder.AddAttribute(__seq2, "ValueChanged", __arg2);
        __builder.AddAttribute(__seq3, "ValueExpression", __arg3);
        __builder.CloseComponent();
        }
    }
}
#pragma warning restore 1591
